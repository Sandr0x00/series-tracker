#!/usr/bin/env python3

import os
import json
import hashlib
import base64

def copy(cp_from:str, src_map:bool=False):
    cp_to = cp_from.split("/")[-1]
    with open(f'node_modules/{cp_from}') as f:
        file_str = f.read()
    with open(f'static/lib/{cp_to}', 'w+') as f:
        f.write(file_str)
    print(f'{cp_to} copied')

    if src_map:
        with open(f'node_modules/{cp_from}.map') as f:
            file_str = f.read()
        with open(f'public/lib/{cp_to}.map', 'w+') as f:
            f.write(file_str)
        print('Source map copied')

if __name__ == "__main__":
    folder = 'static/lib'
    if not os.path.exists(folder):
        os.mkdir(folder)
    for the_file in os.listdir(folder):
        file_path = os.path.join(folder, the_file)
        try:
            os.remove(file_path)
        except Exception as e:
            print(e)
    copy('bootstrap/dist/css/bootstrap.min.css', True)
